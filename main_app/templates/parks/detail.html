{% extends 'base.html' %}
{% load static %}

{% block head %}
<link 
  rel="stylesheet" 
  type="text/css" 
  href="{% static 'css/parks/park-detail.css' %}"
/>
<script defer src="{% static 'js/park-detail.js' %}"></script>
{% endblock %}

{% block content %}

<section class="park-container">

  <div class="park-img">
    {% comment %} {% if park.parkphoto.url %}
      <img 
        src="{{park.parkphoto.url}}" 
        alt="A photo of {{park.name}}"
        class="usr-img"
      >
    {% else %} {% endcomment %}
      <img 
        src="{% static 'images/placeholder.jpg' %}" 
        alt=""
      >
    {% comment %} {% endif %} {% endcomment %}
  </div>

  <div class="park-details">
    <h1>{{park.name}}, {{park.state}}</h1>
    <h3>Highlights: {{park.highlights}}</h3>
    <h3>Visited in {{park.year_visited}}</h3>

    <div class="park-actions">
      <a href="{% url 'park-update' park.id %}" class="btn warn">Edit</a>
      <a href="{% url 'park-delete' park.id %}" class="btn danger">Delete</a>
    </div>

    {% comment %} <h3>Change {{ park.name }}'s photo</h3>
    <p id="file-name"></p>
    <form 
      action="{% url 'add-park-photo' park.id %}"
      enctype="multipart/form-data"
      method="POST"
    >
      {% csrf_token %}
      <label class="btn secondary">
        Choose photo
        <input type="file" name="photo-file" id="file-input">
      </label>
      <button type="submit" class="btn submit">Upload Photo</button>
    </form> {% endcomment %}

  </div>
</section>

<div class="activities-container">
  <section class="activities">

    <div class="subsection-title">
      <h2>Activities</h2>
      <img 
        src="{% static 'placeholder.jpg' %}" 
        alt=""
      />
    </div>

    {% comment %} <table>
      <tbody>
        {% for activity in park.activity_set.all %}
          <tr>
            <td>{{activity.get_type_display}}</td>
            <td>{{activity.description}}</td>
            <td>{{activity.comments}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table> {% endcomment %}

    <div class="temp">
      {% for activity in park.activity_set.all %}
        <p>{{activity.get_type_display}}</p>
        <p>{{activity.description}}</p>
        <p>{{activity.comments}}</p>

        {% if activity.photo.url %}
          <img 
            src="{{activity.photo.url}}" 
            alt="A photo of {{activity.description}}"
            class="usr-img"
          >
        {% else %}
          <img 
            src="{% static 'images/placeholder.jpg' %}" 
            alt=""
          >
        {% endif %}

        {% comment %} <p id="file-name"></p>
        <form 
          action="{% url 'add-photo' park.id activity.id %}"
          enctype="multipart/form-data"
          method="POST"
        >
          {% csrf_token %}
          <label class="btn secondary">
            Choose photo
            <input type="file" name="photo-file" id="file-input">
          </label>
          <button type="submit" class="btn submit">Upload Photo</button>
        </form> {% endcomment %}
      {% endfor %}
    </div>

    <h3>Add an Activity</h3>
    <form
      action="{% url 'add-activity' park.id %}"
      method="post" 
      class="subsection-content"
			autocomplete="off"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      {{ activity_form.as_p }}

      <p id="file-name"></p>
      <label class="btn secondary">
        Choose photo
        <input type="file" name="photo-file" id="file-input">
      </label>
      {% comment %} <button type="submit" class="btn submit">Upload Photo</button> {% endcomment %}

      <button type="submit" class="btn submit">Add Activity</button>
    </form>
  </section>
</div>
{% endblock %}